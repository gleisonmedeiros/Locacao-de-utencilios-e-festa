{% extends 'index.html' %}

{% block content %}

  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

  <nav class="navbar"  style="margin-top: 50px;" >
    <a class="navbar-brand" href="#">Cadastro do pedido</a>
  </nav>

 <form method="post">
  {% csrf_token %}

  {{ form.as_p }}

  {% for formset in form.itens_pedido %}
    {{ formset.as_p }}
  {% endfor %}

    <input type="submit" name="save_itens" value="Salvar Itens">
  <input type="submit" name="save_pedido" value="Salvar Pedido">
</form>


<script>
    $(function() {
        // Configurando o Datepicker em português
        $.datepicker.setDefaults($.datepicker.regional['pt-BR']);

        // Configurando o formato de data brasileiro
        $.datepicker.setDefaults({
            dateFormat: 'dd/mm/yy',
            dayNamesMin: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'],
            monthNames: [
                'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
                'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
            ]
        });

        // Inicializando o Datepicker
        $("#id_data").datepicker();
    });
</script>


<script>
  function formatarDataNascimento(input) {
    let dataNascimento = input.value.replace(/\D/g, ''); // Remove caracteres não numéricos

    if (dataNascimento.length === 8) {
      // Formato para data de nascimento (8 dígitos)
      dataNascimento = dataNascimento.replace(/^(\d{2})(\d{2})(\d{4})$/, "$1/$2/$3");
    }

    input.value = dataNascimento;
  }

  // Adiciona um ouvinte de evento para formatar a data de nascimento quando o usuário digitar
  document.getElementById('nasc').addEventListener('input', function() {
    formatarDataNascimento(this);
  });
</script>




{% endblock %}